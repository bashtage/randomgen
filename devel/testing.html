<!DOCTYPE html> <meta charset=utf-8  /> <meta name=viewport  content="width=device-width, initial-scale=1.0" /><meta name=generator  content="Docutils 0.17.1: http://docutils.sourceforge.net/" /> <meta name=viewport  content="width=device-width,initial-scale=1"> <meta http-equiv=x-ua-compatible  content="ie=edge"> <meta name="lang:clipboard.copy" content="Copy to clipboard"> <meta name="lang:clipboard.copied" content="Copied to clipboard"> <meta name="lang:search.language" content=en > <meta name="lang:search.pipeline.stopwords" content=True > <meta name="lang:search.pipeline.trimmer" content=True > <meta name="lang:search.result.none" content="No matching documents"> <meta name="lang:search.result.one" content="1 matching document"> <meta name="lang:search.result.other" content="# matching documents"> <meta name="lang:search.tokenizer" content="[\s\-]+"> <link href="https://fonts.gstatic.com/" rel=preconnect  crossorigin> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel=stylesheet > <style> body, input { font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif } code, kbd, pre { font-family: "Roboto Mono", "Courier New", Courier, monospace } </style> <link rel=stylesheet  href="_static/stylesheets/application.css"/> <link rel=stylesheet  href="_static/stylesheets/application-palette.css"/> <link rel=stylesheet  href="_static/stylesheets/application-fixes.css"/> <link rel=stylesheet  href="_static/fonts/material-icons.css"/> <meta name=theme-color  content="#2196f3"> <script src="_static/javascripts/modernizr.js"></script> <title>Quality Assurance &#8212; RandomGen 1.21.3.dev38+g331e3ea92 documentation</title> <link rel=stylesheet  type="text/css" href="_static/pygments.css" /> <link rel=stylesheet  type="text/css" href="_static/material.css" /> <script data-url_root="./" id=documentation_options  src="_static/documentation_options.js"></script> <script src="_static/jquery.js"></script> <script src="_static/underscore.js"></script> <script src="_static/doctools.js"></script> <script crossorigin=anonymous  integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script> <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script> <script defer=defer  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <link rel="shortcut icon" href="_static/favicon.ico"/> <link rel=index  title=Index  href=genindex.html  /> <link rel=search  title=Search  href=search.html  /> <link rel=next  title=Performance  href=performance.html  /> <link rel=prev  title="What’s New or Different" href=new-or-different.html  /> <body dir=ltr data-md-color-primary=deep-purple data-md-color-accent=purple> <svg class=md-svg > <defs data-children-count=0 > <svg xmlns="http://www.w3.org/2000/svg" width=416  height=448  viewBox="0 0 416 448" id=__github ><path fill=currentColor  d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle  data-md-toggle=drawer  type=checkbox  id=__drawer > <input class=md-toggle  data-md-toggle=search  type=checkbox  id=__search > <label class=md-overlay  data-md-component=overlay  for=__drawer ></label> <a href="#testing" tabindex=1  class=md-skip > Skip to content </a> <header class=md-header  data-md-component=header > <nav class="md-header-nav md-grid"> <div class="md-flex navheader"> <div class="md-flex__cell md-flex__cell--shrink"> <a href=index.html  title="RandomGen 1.21.3.dev38+g331e3ea92 documentation" class="md-header-nav__button md-logo"> <i class=md-icon >casino</i> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer ></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title" data-md-component=title > <span class=md-header-nav__topic >RandomGen 1.21.3.dev38 (+g331e3ea92)</span> <span class=md-header-nav__topic > Quality Assurance </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search ></label> <div class=md-search  data-md-component=search  role=dialog > <label class=md-search__overlay  for=__search ></label> <div class=md-search__inner  role=search > <form class=md-search__form  action=search.html  method=get  name=search > <input type=text  class=md-search__input  name=q  placeholder=Search  autocapitalize=off  autocomplete=off  spellcheck=false  data-md-component=query  data-md-state=active > <label class="md-icon md-search__icon" for=__search ></label> <button type=reset  class="md-icon md-search__icon" data-md-component=reset  tabindex=-1 > &#xE5CD; </button> </form> <div class=md-search__output > <div class=md-search__scrollwrap  data-md-scrollfix> <div class=md-search-result  data-md-component=result > <div class=md-search-result__meta > Type to start searching </div> <ol class=md-search-result__list ></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source > <a href="https://github.com/bashtage/randomgen/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > randomgen </div> </a> </div> </div> <div class="md-flex__cell md-flex__cell--shrink dropdown"> <button class=dropdownbutton >Versions</button> <div class="dropdown-content md-hero"> <a title=Release  href="https://bashtage.github.io/randomgen/">Release</a> <a title=Development  href="https://bashtage.github.io/randomgen/devel/">Development</a> </div> </div> </div> </nav> </header> <div class=md-container > <main class=md-main > <div class="md-main__inner md-grid" data-md-component=container > <div class="md-sidebar md-sidebar--primary" data-md-component=navigation > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--primary" data-md-level=0 > <label class="md-nav__title md-nav__title--site" for=__drawer > <a href=index.html  title="RandomGen 1.21.3.dev38+g331e3ea92 documentation" class="md-nav__button md-logo"> <i class=md-icon >casino</i> </a> <a href=index.html  title="RandomGen 1.21.3.dev38+g331e3ea92 documentation">RandomGen 1.21.3.dev38 (+g331e3ea92)</a> </label> <div class=md-nav__source > <a href="https://github.com/bashtage/randomgen/" title="Go to repository" class=md-source  data-md-source=github > <div class=md-source__icon > <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" width=28  height=28 > <use xlink:href="#__github" width=24  height=24 ></use> </svg> </div> <div class=md-source__repository > randomgen </div> </a> </div> <ul class=md-nav__list > <li class=md-nav__item > <a href=future.html  class=md-nav__link >Future Plans</a> <li class=md-nav__item > <a href=generator.html  class=md-nav__link >Random Generation</a> <li class=md-nav__item > <a href=extended-generator.html  class=md-nav__link >Extended Generator</a> <li class=md-nav__item > <a href=legacy.html  class=md-nav__link >Legacy Random Generation</a> <li class=md-nav__item > <a href="bit_generators/index.html" class=md-nav__link >Bit Generators</a> <li class=md-nav__item > <a href=seed_sequence.html  class=md-nav__link >Seed Sequences</a> <li class=md-nav__item > <a href=parallel.html  class=md-nav__link >Parallel Applications</a> <li class=md-nav__item > <a href=multithreading.html  class=md-nav__link >Multithreaded Generation</a> <li class=md-nav__item > <a href=new-or-different.html  class=md-nav__link >What’s New or Different</a> <li class=md-nav__item > <input class="md-toggle md-nav__toggle" data-md-toggle=toc  type=checkbox  id=__toc > <label class="md-nav__link md-nav__link--active" for=__toc > Quality Assurance </label> <a href="#" class="md-nav__link md-nav__link--active">Quality Assurance</a> <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#testing--page-root" class=md-nav__link >Quality Assurance</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#core-testing" class=md-nav__link >Core Testing</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#notes" class=md-nav__link >Notes</a> <li class=md-nav__item ><a href="#example-configuration" class=md-nav__link >Example Configuration</a> </ul> </nav> <li class=md-nav__item ><a href="#additional-experiments" class=md-nav__link >Additional Experiments</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#correlated-seeds" class=md-nav__link >Correlated Seeds</a> <li class=md-nav__item ><a href="#sequential-seeds" class=md-nav__link >Sequential Seeds</a> <li class=md-nav__item ><a href="#zero-0-seeding" class=md-nav__link >Zero (0) Seeding</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a class=md-nav__extra_link  href="_sources/testing.rst.txt">Show Source</a> </ul> </nav> <ul class=md-nav__list > <li class=md-nav__item > <a href="#core-testing" class=md-nav__link >Core Testing</a> <li class=md-nav__item > <a href="#additional-experiments" class=md-nav__link >Additional Experiments</a> </ul> <li class=md-nav__item > <a href=performance.html  class=md-nav__link >Comparing Performance</a> <li class=md-nav__item > <a href=extending.html  class=md-nav__link >Extending</a> <li class=md-nav__item > <a href=custom-bit-generators.html  class=md-nav__link >Writing a BitGenerator</a> <li class=md-nav__item > <a href=entropy.html  class=md-nav__link >Reading System Entropy</a> <li class=md-nav__item > <a href=references.html  class=md-nav__link >References</a> <li class=md-nav__item > <a href=evolution.html  class=md-nav__link >Evolution of randomgen</a> <li class=md-nav__item > <a href=change-log.html  class=md-nav__link >Change Log</a> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc > <div class=md-sidebar__scrollwrap > <div class=md-sidebar__inner > <nav class="md-nav md-nav--secondary"> <label class=md-nav__title  for=__toc >Contents</label> <ul class=md-nav__list  data-md-scrollfix=""> <li class=md-nav__item ><a href="#testing--page-root" class=md-nav__link >Quality Assurance</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#core-testing" class=md-nav__link >Core Testing</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#notes" class=md-nav__link >Notes</a> <li class=md-nav__item ><a href="#example-configuration" class=md-nav__link >Example Configuration</a> </ul> </nav> <li class=md-nav__item ><a href="#additional-experiments" class=md-nav__link >Additional Experiments</a><nav class=md-nav > <ul class=md-nav__list > <li class=md-nav__item ><a href="#correlated-seeds" class=md-nav__link >Correlated Seeds</a> <li class=md-nav__item ><a href="#sequential-seeds" class=md-nav__link >Sequential Seeds</a> <li class=md-nav__item ><a href="#zero-0-seeding" class=md-nav__link >Zero (0) Seeding</a> </ul> </nav> </ul> </nav> <li class=md-nav__item ><a class=md-nav__extra_link  href="_sources/testing.rst.txt">Show Source</a> <li id=searchbox  class=md-nav__item > </ul> </nav> </div> </div> </div> <div class=md-content > <article class="md-content__inner md-typeset" role=main > <section id=quality-assurance > <span id=id1 ></span><h1 id=testing--page-root >Quality Assurance<a class=headerlink  href="#testing--page-root" title="Permalink to this headline">¶</a></h1> <section id=core-testing > <h2 id=core-testing >Core Testing<a class=headerlink  href="#core-testing" title="Permalink to this headline">¶</a></h2> <p>A values in the below are the maximum output size where a bit generator or sequence of bit generators has passed <a class="reference external" href="http://pracrand.sourceforge.net/">PractRand</a>. A – indicates that configuration is not relevant. Failures are marked with FAIL. Most bit generators were only tested in their default configuration. Non-default configurations are indicated by listing the keyword arguments to the bit generator. Two sets of tests were performed. The first tested all configurations using 128GB of data using PractRand’s extended set of tests and additional bit folding. The second set of tests used 4TB of data wit the standard set of tests and folding.</p> <p>All bit generators have been tested using the same <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a> initialized with the same 256-bits of entropy taken from random.org.</p> <table> <colgroup> <col style="width: 29%"/> <col style="width: 14%"/> <col style="width: 14%"/> <col style="width: 14%"/> <col style="width: 14%"/> <col style="width: 14%"/> <thead> <tr class=row-odd ><th class=head ><p>Method</p> <th class=head  colspan=3 ><p>Seed Sequence</p> <th class=head  colspan=2 ><p>Jumped</p> <tr class=row-even ><th class=head ><p>Streams</p> <th class=head ><p>1</p> <th class=head ><p>4</p> <th class=head ><p>8196</p> <th class=head ><p>4</p> <th class=head ><p>8196</p> <tr class=row-odd ><td><p>AESCounter</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>ChaCha(rounds=20)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>ChaCha(rounds=8)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>DSFMT⁴</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>FAIL at 64 GB¹</p> <tr class=row-odd ><td><p>EFIIX64</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-even ><td><p>HC128</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-odd ><td><p>JSF</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-even ><td><p>JSF(seed_size=3)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-odd ><td><p>LCG128Mix(output=upper)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>LXM</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>MT19937⁴,⁵</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>4TB</p> <tr class=row-even ><td><p>PCG64DXSM²</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>PCG64(variant=dxsm-128)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>PCG64⁵</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>Philox⁵</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>Romu</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-odd ><td><p>Romu(variant=trio)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-even ><td><p>SFC64⁵</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-odd ><td><p>SFC64(k=3394385948627484371)</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-even ><td><p>SFC64(k=Weyl)³</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>–</p> <td><p>–</p> <tr class=row-odd ><td><p>SFMT⁴</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>4TB</p> <td><p>FAIL at 64 GB¹</p> <td><p>FAIL at 4 TB¹</p> <tr class=row-even ><td><p>SPECK128</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>ThreeFry</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-even ><td><p>Xoshiro256</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <tr class=row-odd ><td><p>Xoshiro512</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> <td><p>4TB</p> </table> <section id=notes > <h3 id=notes >Notes<a class=headerlink  href="#notes" title="Permalink to this headline">¶</a></h3> <p>¹ Failures at or before 128GB were generated by tests that used the expanded set of tests and extra bt folds (<code class="docutils literal notranslate"><span class=pre >-te</span> <span class=pre >1</span></code> and <code class="docutils literal notranslate"><span class=pre >-tf</span> <span class=pre >2</span></code>). Failures at sample sizes above 128GB were produces using the default configuration (<code class="docutils literal notranslate"><span class=pre >-te</span> <span class=pre >0</span></code> and <code class="docutils literal notranslate"><span class=pre >-tf</span> <span class=pre >1</span></code>).</p> <p>² PCG64DXSM and PCG64(variant=dxsm) are identical and so the latter not separately reported.</p> <p>³ SFC64(k=weyl) uses distinct Weyl increments that have 50% or fewer non-zero bits.</p> <p>⁴ The Mersenne Twisters begin to fail at 64GB. This is a known limitation of MT-family generators. These should not be used in large studies except when backward compatibility is required.</p> <p>⁵ Identical output to the version included in NumPy 1.19.</p> </section> <section id=example-configuration > <h3 id=example-configuration >Example Configuration<a class=headerlink  href="#example-configuration" title="Permalink to this headline">¶</a></h3> <p>All configurations are constructed using the same template. The code below tests a configuration using 8,196 streams of <a class="reference internal" href="bit_generators/aesctr.html#randomgen.aes.AESCounter" title=randomgen.aes.AESCounter ><code class="xref py py-class docutils literal notranslate"><span class=pre >AESCounter</span></code></a>. The other configurations simply make changes to either <code class="docutils literal notranslate"><span class=pre >JUMPED</span></code> or <code class="docutils literal notranslate"><span class=pre >STREAMS</span></code>.</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=kn >import</span> <span class=nn >numpy</span> <span class=k >as</span> <span class=nn >np</span>

<span class=kn >import</span> <span class=nn >randomgen</span> <span class=k >as</span> <span class=nn >rg</span>

<span class=n >ENTROPY</span> <span class=o >=</span> <span class=mi >86316980830225721106033794313786972513572058861498566720023788662568817403978</span>
<span class=n >JUMPED</span> <span class=o >=</span> <span class=kc >False</span>
<span class=n >STREAMS</span> <span class=o >=</span> <span class=mi >8196</span>
<span class=n >BIT_GENERATOR_KWARGS</span> <span class=o >=</span> <span class=p >{}</span>

<span class=n >SEED_SEQ</span> <span class=o >=</span> <span class=n >np</span><span class=o >.</span><span class=n >random</span><span class=o >.</span><span class=n >SeedSequence</span><span class=p >(</span><span class=n >ENTROPY</span><span class=p >)</span>


<span class=n >BASE_GEN</span> <span class=o >=</span> <span class=n >rg</span><span class=o >.</span><span class=n >AESCounter</span><span class=p >(</span><span class=n >SEED_SEQ</span><span class=p >,</span> <span class=o >**</span><span class=n >BIT_GENERATOR_KWARGS</span><span class=p >)</span>
<span class=k >if</span> <span class=n >STREAMS</span> <span class=o >==</span> <span class=mi >1</span><span class=p >:</span>
   <span class=n >bit_gens</span> <span class=o >=</span> <span class=p >[</span><span class=n >BASE_GEN</span><span class=p >]</span>
<span class=k >elif</span> <span class=n >JUMPED</span><span class=p >:</span>
   <span class=n >bit_gens</span> <span class=o >=</span> <span class=p >[</span><span class=n >BASE_GEN</span><span class=p >]</span>
   <span class=k >for</span> <span class=n >_</span> <span class=ow >in</span> <span class=nb >range</span><span class=p >(</span><span class=n >STREAMS</span> <span class=o >-</span> <span class=mi >1</span><span class=p >):</span>
      <span class=n >bit_gens</span><span class=o >.</span><span class=n >append</span><span class=p >(</span><span class=n >bit_gens</span><span class=p >[</span><span class=o >-</span><span class=mi >1</span><span class=p >]</span><span class=o >.</span><span class=n >jumped</span><span class=p >())</span>
<span class=k >else</span><span class=p >:</span>
   <span class=n >bit_gens</span> <span class=o >=</span> <span class=p >[]</span>
   <span class=k >for</span> <span class=n >child</span> <span class=ow >in</span> <span class=n >SEED_SEQ</span><span class=o >.</span><span class=n >spawn</span><span class=p >(</span><span class=n >STREAMS</span><span class=p >):</span>
      <span class=n >bit_gens</span><span class=o >.</span><span class=n >append</span><span class=p >(</span><span class=n >rg</span><span class=o >.</span><span class=n >AESCounter</span><span class=p >(</span><span class=n >child</span><span class=p >,</span> <span class=o >**</span><span class=n >BIT_GENERATOR_KWARGS</span><span class=p >))</span>
<span class=n >output</span> <span class=o >=</span> <span class=mi >64</span>
</pre></div> </div> </section> </section> <section id=additional-experiments > <h2 id=additional-experiments >Additional Experiments<a class=headerlink  href="#additional-experiments" title="Permalink to this headline">¶</a></h2> <p>The best practice for using any of the bit generators is to initialize a single <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a> with a reasonably random seed, and then to use this seed sequence to initialize all bit generators. Some additional experiments were used to check that the quality of output streams is not excessively sensitive to use that deviates from this best practice.</p> <section id=correlated-seeds > <h3 id=correlated-seeds >Correlated Seeds<a class=headerlink  href="#correlated-seeds" title="Permalink to this headline">¶</a></h3> <p>While the recommended practice is to use a <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a>, it is natural to worry about bad seeds. A common sequence of bad seeds are those which set a single bit to be non-zero: 1, 2, 4, 8, 16, and so on. By default, bit generators use a <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a> to transform seed values into an initial state for the bit generator. <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a> is itself a random number generator that always escapes low-entropy states – that is, those with many 0s or 1s – immediately. All bit generators were tested with 8 streams using seeds of the form <span class="math notranslate nohighlight">\(2^i\)</span> for i in 0, 1, …, 7. Only three bit generators failed this experiment: <a class="reference internal" href="bit_generators/dsfmt.html#randomgen.dsfmt.DSFMT" title=randomgen.dsfmt.DSFMT ><code class="xref py py-class docutils literal notranslate"><span class=pre >DSFMT</span></code></a>, <a class="reference internal" href="bit_generators/mt19937.html#randomgen.mt19937.MT19937" title=randomgen.mt19937.MT19937 ><code class="xref py py-class docutils literal notranslate"><span class=pre >MT19937</span></code></a>, and <a class="reference internal" href="bit_generators/sfmt.html#randomgen.sfmt.SFMT" title=randomgen.sfmt.SFMT ><code class="xref py py-class docutils literal notranslate"><span class=pre >SFMT</span></code></a>. These are all members of the Mersenne Twister family which commonly fail <code class="docutils literal notranslate"><span class=pre >BRank</span></code> tests.</p> </section> <section id=sequential-seeds > <h3 id=sequential-seeds >Sequential Seeds<a class=headerlink  href="#sequential-seeds" title="Permalink to this headline">¶</a></h3> <p>The recommended practice for constructing multiple <code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code>’s <code class="xref py py-func docutils literal notranslate"><span class=pre >spawn()</span></code> method.</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=kn >from</span> <span class=nn >numpy.random</span> <span class=kn >import</span> <span class=n >default_rng</span><span class=p >,</span> <span class=n >Generator</span><span class=p >,</span> <span class=n >SeedSequence</span>
<span class=kn >from</span> <span class=nn >randomgen</span> <span class=kn >import</span> <span class=n >Romu</span>

<span class=n >NUM_STREAMS</span> <span class=o >=</span> <span class=mi >2</span><span class=o >**</span><span class=mi >15</span>
<span class=n >seed_seq</span> <span class=o >=</span> <span class=n >SeedSequence</span><span class=p >(</span><span class=mi >5897100938578919857511</span><span class=p >)</span>
<span class=c1 ># To use the default bit generator, which is not guaranteed to be stable</span>
<span class=n >generators</span> <span class=o >=</span> <span class=p >[</span><span class=n >default_rng</span><span class=p >(</span><span class=n >child</span><span class=p >)</span> <span class=k >for</span> <span class=n >child</span> <span class=ow >in</span> <span class=n >seed_seq</span><span class=o >.</span><span class=n >spawn</span><span class=p >(</span><span class=n >NUM_STREAMS</span><span class=p >)]</span>

<span class=c1 ># To use a specific bit generator</span>
<span class=n >generators</span> <span class=o >=</span> <span class=p >[</span><span class=n >Generator</span><span class=p >(</span><span class=n >Romu</span><span class=p >(</span><span class=n >child</span><span class=p >))</span> <span class=k >for</span> <span class=n >child</span> <span class=ow >in</span> <span class=n >seed_seq</span><span class=o >.</span><span class=n >spawn</span><span class=p >(</span><span class=n >NUM_STREAMS</span><span class=p >)]</span>
</pre></div> </div> <p>It is common to see examples that use sequential seed that resemble:</p> <div class="highlight-default notranslate"><div class=highlight ><pre><span></span><span class=n >generators</span> <span class=o >=</span> <span class=p >[</span><span class=n >default_rng</span><span class=p >(</span><span class=n >i</span><span class=p >)</span> <span class=k >for</span> <span class=n >i</span> <span class=ow >in</span> <span class=nb >range</span><span class=p >(</span><span class=n >NUM_STREAMS</span><span class=p >)]</span>
</pre></div> </div> <p>This practice was examined with all bit generators using 8,196 streams seeded using 0, 1, 2, …, 8,195 by intertwining the output of the generators. <strong>None</strong> of the generators failed these tests.</p> </section> <section id=zero-0-seeding > <h3 id=zero-0-seeding >Zero (0) Seeding<a class=headerlink  href="#zero-0-seeding" title="Permalink to this headline">¶</a></h3> <p>Bit generators use a <a class="reference external" href="https://numpy.org/devdocs/reference/random/bit_generators/generated/numpy.random.SeedSequence.html#numpy.random.SeedSequence" title="(in NumPy v1.24.dev0)"><code class="xref py py-class docutils literal notranslate"><span class=pre >SeedSequence</span></code></a> that always escapes low-entropy states immediately to transform seed values into an initial state for the bit generator. To ensure that this is not an issue, all bit generators were tested using 4, 32 or 8196 streams using 128GB in <a class="reference external" href="http://pracrand.sourceforge.net/">PractRand</a> with expanded tests and extra folding. The table below reports <strong>only</strong> the configurations that failed. These were all Mersenne Twister-class generators and so failure is attributable to the bit generator and not the seeding. All other generators passed these tests.</p> <table> <colgroup> <col style="width: 27%"/> <col style="width: 29%"/> <col style="width: 31%"/> <col style="width: 12%"/> <thead> <tr class=row-odd ><th class=head ><p>Streams</p> <th class=head ><p>4</p> <th class=head ><p>32</p> <th class=head ><p>8196</p> <tr class=row-even ><td><p>DSFMT</p> <td><p>FAIL at 64 GB</p> <td><p>FAIL at 64 GB</p> <td><p>–</p> <tr class=row-odd ><td><p>MT19937</p> <td><p>FAIL at 64 GB</p> <td><p>FAIL at 64 GB</p> <td><p>–</p> <tr class=row-even ><td><p>SFMT</p> <td><p>FAIL at 64 GB</p> <td><p>FAIL at 64 GB</p> <td><p>–</p> </table> <p>The non-failures at 8196 are due to the relatively short length of each sequence tested since 128GB shared across 8196 streams only samples <span class="math notranslate nohighlight">\(2^{37}/(2^{13}\times2^{3})=2^{21}\)</span> values from each stream since each value is 8-bytes.</p> </section> </section> </section> </article> </div> </div> </main> </div> <footer class=md-footer > <div class=md-footer-nav > <nav class="md-footer-nav__inner md-grid"> <a href=new-or-different.html  title="What’s New or Different" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel=prev > <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Previous </span> What’s New or Different </span> </div> </a> <a href=performance.html  title=Performance  class="md-flex md-footer-nav__link md-footer-nav__link--next" rel=next > <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class=md-flex__ellipsis > <span class=md-footer-nav__direction > Next </span> Performance </span> </div> <div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright > <div class=md-footer-copyright__highlight > &#169; Copyright 2018, Kevin Sheppard. </div> Created using <a href="http://www.sphinx-doc.org/">Sphinx</a> 4.5.0. and <a href="https://github.com/bashtage/sphinx-material/">Material for Sphinx</a> </div> </div> </div> </footer> <script src="_static/javascripts/application.js"></script> <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>